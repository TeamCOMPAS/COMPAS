

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Log file annotations &mdash; COMPAS  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/COMPAS.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Example log file definitions file" href="standard-logfiles-example-definitions-file.html" />
    <link rel="prev" title="Standard log file format" href="standard-logfiles-format.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> COMPAS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Getting%20started/getting-started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../user-guide.html">User guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Program%20options/program-options.html">Program options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../grid-files.html">Grid files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../random-seed.html">Random seed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Running%20COMPAS/running-compas.html">Running COMPAS</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="output.html">COMPAS output</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="standard-logfiles.html">Standard log files</a></li>
<li class="toctree-l3"><a class="reference internal" href="standard-logfiles-record-specifiers.html">Standard log file record specifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="standard-logfiles-record-specification.html">Standard log file record specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="standard-logfiles-format.html">Standard log file format</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Log file annotations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-vector-option-shorthand-notation">Using vector option shorthand notation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#including-annotations-in-log-files">Including annotations in log files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="standard-logfiles-example-definitions-file.html">Example log file definitions file</a></li>
<li class="toctree-l3"><a class="reference internal" href="standard-logfiles-default-record-specifications.html">Default log file record specifications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Post-processing/post-processing.html">Post-processing tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Tutorial/example-compas-run.html">Tutorial: simple COMPAS run</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer%20guide/developer-guide.html">Developer guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TeamCOMPAS/COMPAS"> Code repository</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TeamCOMPAS/COMPAS/issues/new"> Request an enhancement</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/TeamCOMPAS/COMPAS/issues/new"> Report a problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact-us.html">Contact us</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">COMPAS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../user-guide.html">User guide</a> &raquo;</li>
        
          <li><a href="output.html">COMPAS output</a> &raquo;</li>
        
      <li>Log file annotations</li>
    
    

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="log-file-annotations">
<h1>Log file annotations<a class="headerlink" href="#log-file-annotations" title="Permalink to this headline">¶</a></h1>
<p>COMPAS provides functionality that allows users to annotate standard log files.</p>
<p>The original motivation for log file annotation functionality was to enable users to describe the contents of custom grid files,
but annotations can be used for any reason.  With the ability to annotate the log files, users can indicate the origin of various
input data - e.g. the user could indicate what IMF was used to draw initial mass values, or what distribution was used to draw
mass ratio (q), etc.</p>
<p>Annotations are written to log files as columns of data (aka datasets in <code class="docutils literal notranslate"><span class="pre">HDF5</span></code> files). Annotations are specified via program
options, and so can be specified on the command line as well as in grid files. Because annotations are written to log files
as columns of data, functionality is provided to allow the user to specify header strings for the columns, as well as the
actual data for the columns (the annotations).</p>
<p>Two program options are provided:</p>
<p><code class="docutils literal notranslate"><span class="pre">--notes-hdrs</span></code></p>
<p>Allows users to specify header strings for annotation columns.  Can only be specified on the command line: not valid in grid
files, and will be ignored, and elicit a warning, if included.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">notes-hdrs</span></code> program option is a vector program option, and provides for the specification of one or more annotation
header strings.  Usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">notes</span><span class="o">-</span><span class="n">hdrs</span> <span class="n">headerstr1</span> <span class="n">headerstr2</span> <span class="n">headerstr3</span> <span class="o">...</span> <span class="n">headerstrN</span>
</pre></div>
</div>
<p>Header strings are separated by a space character. There is no limit to the number of header strings specified, and the number
specified defines the maximum number of annotations allowed.</p>
<p><code class="docutils literal notranslate"><span class="pre">--notes</span></code></p>
<p>Allows users to specify annotations.  Can be specified on the command line and in a grid file.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">notes</span></code> program option is a vector program option, and provides for the specification of one or more annotation strings.
Usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">notes</span> <span class="n">annotation1</span> <span class="n">annotation2</span> <span class="n">annotation3</span> <span class="o">...</span> <span class="n">annotationN</span>
</pre></div>
</div>
<p>Annotation strings are separated by a space character.  The number of annotation strings is limited to the number of annotation
header strings specified (via the <code class="docutils literal notranslate"><span class="pre">--notes-hdrs</span></code> program option).  If more annotation strings are specified than header strings,
the excess annotation strings will be ignored (and a warning displayed).</p>
<p>When using this notation, all annotation strings must be provided: there is no mechanism to allow a default annotation using the
fallback method for program options (to the command-line value, then to the COMPAS default) - leaving an annotation string blank
would be ambiguous (as to which annotation string had been left blank), and specifying an empty string (&quot;&quot;) as an annotation
string would be ambiguous (as to whether the user wanted the annotation string to default, or just be an empty string).</p>
<p>Neither header strings, nor annotation strings, may begin with the dash character ('-'), because the shell parser will parse them
as option names before passing them through to COMPAS.</p>
<p>COMPAS imposes no limit to the length of an individual annotation header string or annotation string (number of characters), but
there may be practical limits imposed by the underlying system.</p>
<div class="section" id="using-vector-option-shorthand-notation">
<h2>Using vector option shorthand notation<a class="headerlink" href="#using-vector-option-shorthand-notation" title="Permalink to this headline">¶</a></h2>
<p>Because the notation described above could become awkward, and to allow for default annotations, a shorthand notation for vector
program options is provided (see <a class="reference internal" href="../Program%20options/program-options-vector-options.html"><span class="doc">Vector program options</span></a> for details).</p>
<p>Usage using the shorthand notation is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">notes</span><span class="o">-</span><span class="n">hdrs</span> <span class="p">[</span><span class="n">headerstr1</span><span class="p">,</span><span class="n">headerstr2</span><span class="p">,</span><span class="n">headerstr3</span><span class="p">,</span><span class="o">...</span><span class="p">,</span><span class="n">headerStrN</span><span class="p">]</span>

<span class="o">--</span><span class="n">notes</span> <span class="p">[</span><span class="n">annotation1</span><span class="p">,</span><span class="n">annotation2</span><span class="p">,</span><span class="n">annotation3</span><span class="p">,</span><span class="o">...</span><span class="p">,</span><span class="n">annotationN</span><span class="p">]</span>
</pre></div>
</div>
<p>Because the parameters are bounded by the brackets, and delimited by commas (and so are now positional), users can omit specific
annotations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">notes</span> <span class="p">[,,</span><span class="n">annotation3</span><span class="p">,,</span><span class="n">annotation5</span><span class="p">]</span>
</pre></div>
</div>
<p>In the example above, annotations 1, 2, 4, and those beyond annotation 5 have been omitted. Annotations 1, 2 &amp; 4 will default - if
they are specified in this manner on a grid line they will default to the correspodning annotation specified on the command line; if
they are specified in this manner on the command line they will default to the COMPAS default annotation (the empty string).  In the
example above, if the number of annotations expected, as defined by the number of annotation headers specified via the <code class="docutils literal notranslate"><span class="pre">--notes-hdrs</span></code>
program option is more than 5, then anotations beyond annotation 5 (the last annotation actually specified by the user) will default
in the same manner as described above.</p>
<p>Spaces in annotation header strings and annotation strings need to be enclosed in quotes, or the shell parser will parse them as
separate arguments before passing them through to COMPAS.  If the log file type is specified as TXT, then any spaces in annotation
header strings and annotation strings need to be enclosed in quotes to avoid the shell parser parsing them as separate arguments, but
also need to have enclosing quotes propagated to the logfile, or the spaces will be interpreted as delimiters in the log file - in this
case, the user will need to add enclosing escaped quote characters ('&quot;') before adding the enclosing quotes.  e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">notes</span><span class="o">-</span><span class="n">hdrs</span> <span class="p">[</span><span class="n">headerstr1</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">header str 2</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">headerstr3</span><span class="p">,</span><span class="o">...</span><span class="p">,</span><span class="n">headerStrN</span><span class="p">]</span>
</pre></div>
</div>
<p>The shorthand notation is expanded to the notation described above (the COMPAS code just fills in the omitted annotation strings with
the required defaults), so the caveat mentioned above that neither header strings, nor annotation strings, may begin with the dash
character ('-') applies to the shorthand notation.</p>
<p>Shorthand notation is optional: users may choose to use the notation described above rather than shorthand notation, but in that case
all annotation strings must be specified (no omissions, no defaults).</p>
</div>
<div class="section" id="including-annotations-in-log-files">
<h2>Including annotations in log files<a class="headerlink" href="#including-annotations-in-log-files" title="Permalink to this headline">¶</a></h2>
<p>Annotations can be included in the record specifiers for any of the standard log files in the same way that other program options
are included: they can be included in the default log file record specifiers in <code class="docutils literal notranslate"><span class="pre">constants.h</span></code> (compile-time configuration: see
<a class="reference internal" href="../../Developer%20guide/constants-dot-h.html"><span class="doc">Constants source file</span></a>), and/or they can be added to, or removed from, the default log file record specifiers
via the use of a log file definitions file (run-time configuration: see <a class="reference internal" href="standard-logfiles-record-specification.html"><span class="doc">Standard log file record specification</span></a>).</p>
<div class="section" id="compile-time-configuration">
<h3>Compile-time configuration<a class="headerlink" href="#compile-time-configuration" title="Permalink to this headline">¶</a></h3>
<p>The property specifier <code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES</span></code> is available to be included in any of the default log file record specifiers in
<code class="docutils literal notranslate"><span class="pre">constants.h</span></code>.  If the property specifier <code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES</span></code> is included in a default log file record specifier:</p>
<blockquote>
<div><ul class="simple">
<li><p>a column will be included in the log file for each of the annotation header strings specfied by the user (via the <code class="docutils literal notranslate"><span class="pre">notes-hdrs</span></code>
program option), with each column having the respective header string specified by the user</p></li>
<li><p>each record in the log file will include an annotation string for each annotation column, the contents of which is determined by
what the user specified using the <code class="docutils literal notranslate"><span class="pre">--notes</span></code> program option.</p></li>
</ul>
</div></blockquote>
<p>Adding the property specifier <code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES</span></code> to the default record specifier in <code class="docutils literal notranslate"><span class="pre">constants.h</span></code> for a log file causes
<em>all</em> annotation columns (as specified via the <code class="docutils literal notranslate"><span class="pre">notes-hdrs</span></code> program option) to be included in the log file: including annotations
in a log file via compile-time configuration is an all-or-nothing proposition.</p>
</div>
<div class="section" id="run-time-configuration">
<h3>Run-time configuration<a class="headerlink" href="#run-time-configuration" title="Permalink to this headline">¶</a></h3>
<p>COMPAS provides functionality to allow users to change which properties are to be written to the standard log files at run-time:
see <a class="reference internal" href="standard-logfiles-record-specification.html"><span class="doc">Standard log file record specification</span></a>. The property specifier <code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES</span></code> can be added to, or removed from,
any of the log file record specifiers by the use of this functionality.</p>
<p>Furthermore, because at run-time the number of annotation columns is known (information not known at compile-time), the
<code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES</span></code> property specifier can (optionally) be indexed to allow the specification of a particular annotation column.
Thus, <code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES</span></code> (with no index) indicates <em>all</em> annotations columns, whereas <code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES[2]</span></code> indicates
annotation column 2 (1-based: the first annotation column is indicated by <code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES[1]</span></code>). By using the optional index,
users can add specific annotations columns to, or remove them from, any of the log files.</p>
<p>For example, this log file definitions file entry:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SSE_SYSPARMS_REC</span> <span class="o">-=</span> <span class="p">{</span> <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span> <span class="p">}</span>
</pre></div>
</div>
<p>removes all annotations columns from the SSE System Parameters log file.</p>
<p>This entry:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BSE_PULSARS_REC</span> <span class="o">+=</span> <span class="p">{</span> <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">}</span>
</pre></div>
</div>
<p>adds annotations column 1 to the BSE Pulsar Evolution log file.</p>
<p>These entries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">BSE_SYSPARMS_REC</span> <span class="o">-=</span> <span class="p">{</span> <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span> <span class="p">}</span>
<span class="n">BSE_SYSPARMS_REC</span> <span class="o">+=</span> <span class="p">{</span> <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">}</span>

<span class="n">BSE_SNE_REC</span> <span class="o">+=</span> <span class="p">{</span> <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>  <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="p">}</span>

<span class="n">BSE_RLOF_REC</span> <span class="o">-=</span> <span class="p">{</span> <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="p">}</span>

<span class="n">BSE_CEE_REC</span> <span class="o">+=</span> <span class="p">{</span> <span class="n">PROGRAM_OPTION</span><span class="p">::</span><span class="n">NOTES</span> <span class="p">}</span>
</pre></div>
</div>
<p>will:</p>
<blockquote>
<div><ul class="simple">
<li><p>remove all annotations columns from the BSE System Parameters log file</p></li>
<li><p>add annotations columns 1 and 3 to the BSE System Parameters log file</p></li>
<li><p>add annotations columns 2, 3, and 7 to the BSE Supernovae log file</p></li>
<li><p>remove annotations column 5 from the BSE RLOF log file</p></li>
<li><p>add all annotation columns to the BSE Common envelopes files</p></li>
</ul>
</div></blockquote>
<p>Specifying an index value less than 1 or greater than the number of annotation headers specified will result in an error.</p>
<p>See <a class="reference internal" href="standard-logfiles-record-specification.html"><span class="doc">Standard log file record specification</span></a> for more details.</p>
<p><br />
The property <code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES</span></code> is included in the default record specifier in <code class="docutils literal notranslate"><span class="pre">constants.h</span></code> for both the SSE System Parameters
log file, and the BSE System Parameters log file.</p>
<p>Note that whichever configuration method is used to include annotations in log files, if no annotation headers are specified via the
<code class="docutils literal notranslate"><span class="pre">notes-hdrs</span></code> program option, no annotations will be included in any log file.</p>
</div>
<div class="section" id="log-file-space-considerations">
<h3>Log file space considerations<a class="headerlink" href="#log-file-space-considerations" title="Permalink to this headline">¶</a></h3>
<p>Annotations are strings of (effectively) unlimited length, so if several annotations are recorded in a log file for each system evolved,
the storage space required for the log file will grow accordingly. Sometimes annotations will apply to the population rather than to each
individual system, and in those cases it may not be necessary to record the same annotation string for possibly millions of systems in the
log file(s). In such situations, it is likely that the annotation headers and strings will be specified on the command line rather than
for each system in a grid file, and so will be recorded in the <code class="docutils literal notranslate"><span class="pre">Run_Details</span></code> file - so removing the <code class="docutils literal notranslate"><span class="pre">PROGRAM_OPTION::NOTES</span></code> property
from the log file record specifications will prevent them from being repeated needlessly in the log files, and they can be retrieved as
required from the <code class="docutils literal notranslate"><span class="pre">Run_Details</span></code> file.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="standard-logfiles-example-definitions-file.html" class="btn btn-neutral float-right" title="Example log file definitions file" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="standard-logfiles-format.html" class="btn btn-neutral float-left" title="Standard log file format" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, The Authors.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>